(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{29:function(e,t,r){e.exports={user__card:"UserMenu_user__card__yV5EQ",user__name:"UserMenu_user__name__3yRIC",logout__button:"UserMenu_logout__button__1_hxg"}},3:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return b})),r.d(t,"a",(function(){return l}));var n=r(16),c=r.n(n),a=r(23),u=r(18),s=r.n(u);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var o={set:function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){s.a.defaults.headers.common.Authorization=""}},i={token:o,register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(l.registerRequest()),t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:n=t.sent,o.set(n.data.token),r(l.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(l.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(l.loginRequest()),t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:n=t.sent,o.set(n.data.token),r(l.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(l.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(l.logoutRequest()),e.prev=1,e.next=4,s.a.post("/users/logout");case 4:o.unset(),t(l.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(l.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return o.set(a),t(l.getCurrentUserRequest()),e.prev=5,e.next=8,s.a.get("/users/current");case 8:u=e.sent,t(l.getCurrentUserSuccess(u.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(l.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},b={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name}},j=r(4),l={registerRequest:Object(j.b)("auth/registerRequest"),registerSuccess:Object(j.b)("auth/registerSuccess"),registerError:Object(j.b)("auth/registerError"),loginRequest:Object(j.b)("auth/loginRequest"),loginSuccess:Object(j.b)("auth/loginSuccess"),loginError:Object(j.b)("auth/loginError"),logoutRequest:Object(j.b)("auth/logoutRequest"),logoutSuccess:Object(j.b)("auth/logoutSuccess"),logoutError:Object(j.b)("auth/logoutError"),getCurrentUserRequest:Object(j.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(j.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(j.b)("auth/getCurrentUserError")}},30:function(e,t,r){e.exports={nav:"Navigation_nav__3KCRK",nav__link:"Navigation_nav__link__3EoN9"}},31:function(e,t,r){e.exports={auth__nav:"AuthNav_auth__nav__wNgcv",auth__link:"AuthNav_auth__link__2KyJ1"}},46:function(e,t,r){e.exports={page__header:"AppBar_page__header__3GqZ2",header__container:"AppBar_header__container__2UAwU"}},7:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return j})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return O}));var n=r(4),c=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),u=Object(n.b)("contacts/fetchContactsError"),s=Object(n.b)("contacts/addContactRequest"),o=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),O=Object(n.b)("phonebook/filter")},80:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(24),u=r.n(a),s=r(6),o=r(9),i=r(3),b=r.p+"static/media/profile-default-image.b8edc76c.jpg",j=r(29),l=r.n(j),O=r(1);function d(){var e=Object(o.b)(),t=Object(o.c)(i.c.getUserName),r=Object(n.useCallback)((function(){return e(i.b.logOut())}),[e]);return Object(O.jsxs)("div",{className:l.a.user__card,children:[Object(O.jsx)("img",{src:b,alt:"avatar",width:"15"}),Object(O.jsxs)("span",{className:l.a.user__name,children:["Welcome, ",t]}),Object(O.jsx)("button",{onClick:r,className:l.a.logout__button,children:"Logout"})]})}var h=r(15),g="/",f="/register",p="/login",_="/contacts",x=r(30),v=r.n(x);function m(){var e=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)("nav",{className:v.a.nav,children:[Object(O.jsx)(h.b,{to:g,className:v.a.nav__link,children:"Main"}),e&&Object(O.jsx)(h.b,{to:_,className:v.a.nav__link,children:"Contacts"})]})}var k=r(31),S=r.n(k),C=function(){return Object(O.jsxs)("div",{className:S.a.auth__nav,children:[Object(O.jsx)(h.c,{className:S.a.auth__link,to:"/register",exact:!0,children:"Register"}),Object(O.jsx)(h.c,{className:S.a.auth__link,to:"/login",exact:!0,children:"Login"})]})},E=r(46),y=r.n(E);function U(){var e=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)("header",{className:y.a.page__header,children:[Object(O.jsx)(m,{}),e?Object(O.jsx)(d,{}):Object(O.jsx)(C,{})]})}var A=r(20),R=r(28);function N(e){var t=e.children,r=(e.isAuthenticated,Object(R.a)(e,["children","isAuthenticated"])),n=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)(s.b,Object(A.a)(Object(A.a)({},r),{},{children:[" ",n?t:Object(O.jsx)(s.a,{to:"/login/>"})]}))}function w(e){var t=e.children,r=(e.isAuthenticated,e.redirectTo),n=Object(R.a)(e,["children","isAuthenticated","redirectTo"]),c=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsx)(s.b,Object(A.a)(Object(A.a)({},n),{},{children:c&&n.restricted?Object(O.jsx)(s.a,{to:r}):t}))}var q=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,91))})),I=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,92))})),z=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,93))})),M=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,90))}));function T(){var e=Object(o.b)();return Object(n.useEffect)((function(){e(i.b.getCurrentUser())}),[e]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U,{}),Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c!"}),children:Object(O.jsxs)(s.d,{children:[Object(O.jsx)(w,{exact:!0,path:g,children:Object(O.jsx)(q,{})}),Object(O.jsx)(w,{restricted:!0,redirectTo:"/contacts",path:f,children:Object(O.jsx)(I,{})}),Object(O.jsx)(w,{restricted:!0,redirectTo:"/contacts",path:p,children:Object(O.jsx)(z,{})}),Object(O.jsx)(N,{path:_,children:Object(O.jsx)(M,{})})]})})]})}var B,J,K,L,F,G,Q,V=r(27),W=r(4),Z=r(47),D=r.n(Z),H=r(48),P=r.n(H),X=r(17),Y=r(2),$=r(8),ee=r(7),te=Object(W.c)([],(B={},Object(Y.a)(B,ee.j,(function(e,t){return t.payload})),Object(Y.a)(B,ee.c,(function(e,t){var r=t.payload;return[].concat(Object(V.a)(e),[r])})),Object(Y.a)(B,ee.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),B)),re=Object(W.c)("",Object(Y.a)({},ee.d,(function(e,t){return t.payload}))),ne=Object(W.c)(!1,(J={},Object(Y.a)(J,ee.b,(function(){return!0})),Object(Y.a)(J,ee.c,(function(){return!1})),Object(Y.a)(J,ee.a,(function(){return!1})),Object(Y.a)(J,ee.f,(function(){return!0})),Object(Y.a)(J,ee.g,(function(){return!1})),Object(Y.a)(J,ee.e,(function(){return!1})),Object(Y.a)(J,ee.i,(function(){return!0})),Object(Y.a)(J,ee.j,(function(){return!1})),Object(Y.a)(J,ee.h,(function(){return!1})),J)),ce=function(e,t){return t.payload},ae=function(){return null},ue=Object(W.c)(null,(K={},Object(Y.a)(K,ee.a,ce),Object(Y.a)(K,ee.e,ce),Object(Y.a)(K,ee.h,ce),Object(Y.a)(K,ee.c,ae),Object(Y.a)(K,ee.g,ae),Object(Y.a)(K,ee.j,ae),K)),se=Object($.b)({items:te,filter:re,loading:ne,error:ue}),oe={name:null,email:null},ie=Object(W.c)(oe,(L={},Object(Y.a)(L,i.a.registerSuccess,(function(e,t){return t.payload.user})),Object(Y.a)(L,i.a.loginSuccess,(function(e,t){return t.payload.user})),Object(Y.a)(L,i.a.logoutSuccess,(function(){return oe})),Object(Y.a)(L,i.a.getCurrentUserSuccess,(function(e,t){return t.payload})),L)),be=Object(W.c)(null,(F={},Object(Y.a)(F,i.a.registerSuccess,(function(e,t){return t.payload.token})),Object(Y.a)(F,i.a.loginSuccess,(function(e,t){return t.payload.token})),Object(Y.a)(F,i.a.logoutSuccess,(function(){return null})),F)),je=function(e,t){return t.payload},le=function(){return null},Oe=Object(W.c)(null,(G={},Object(Y.a)(G,i.a.registerError,je),Object(Y.a)(G,i.a.loginError,je),Object(Y.a)(G,i.a.logoutError,je),Object(Y.a)(G,i.a.getCurrentUserError,je),Object(Y.a)(G,i.a.registerSuccess,le),Object(Y.a)(G,i.a.loginSuccess,le),Object(Y.a)(G,i.a.logoutSuccess,le),Object(Y.a)(G,i.a.getCurrentUserSuccess,le),G)),de=Object(W.c)(!1,(Q={},Object(Y.a)(Q,i.a.registerSuccess,(function(){return!0})),Object(Y.a)(Q,i.a.loginSuccess,(function(){return!0})),Object(Y.a)(Q,i.a.getCurrentUserSuccess,(function(){return!0})),Object(Y.a)(Q,i.a.registerError,(function(){return!1})),Object(Y.a)(Q,i.a.loginError,(function(){return!1})),Object(Y.a)(Q,i.a.getCurrentUserError,(function(){return!1})),Object(Y.a)(Q,i.a.logoutSuccess,(function(){return!1})),Q)),he=Object($.b)({user:ie,token:be,error:Oe,isAuthenticated:de}),ge=[].concat(Object(V.a)(Object(W.d)({serializableCheck:{ignoredActions:[X.a,X.f,X.b,X.c,X.d,X.e]}})),[D.a]),fe={key:"auth",storage:P.a,whitelist:["token"]},pe=Object(W.a)({reducer:{phonebook:se,auth:Object(X.g)(fe,he)},devTools:!1,middleware:ge}),_e={store:pe,persistor:Object(X.h)(pe)},xe=r(49);u.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(o.a,{store:_e.store,children:Object(O.jsx)(xe.a,{loading:null,persistor:_e.persistor,children:Object(O.jsx)(h.a,{children:Object(O.jsx)(T,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.4ef11b58.chunk.js.map