{"version":3,"sources":["component/userMenu/UserMenu.module.css","redux/auth/Auth-operations.js","redux/auth/Auth-selectors.js","redux/auth/Auth-actions.js","component/userMenu/Navigation.module.css","component/userMenu/AuthNav.module.css","component/userMenu/AppBar.module.css","redux/phonebook/Phonebook-actions.js","component/userMenu/profile-default-image.jpg","component/userMenu/UserMenu.js","routes.js","component/userMenu/Navigation.js","component/userMenu/AuthNav.js","component/userMenu/AppBar.js","component/userMenu/PrivateRoute.js","component/userMenu/PublicRoute.js","App.js","redux/phonebook/Phonebook-reducer.js","redux/auth/Auth-reducer.js","redux/store.js","index.js"],"names":["module","exports","axios","defaults","baseURL","token","set","headers","common","Authorization","unset","register","credentials","dispatch","a","authActions","registerRequest","post","response","data","registerSuccess","registerError","message","logIn","loginRequest","loginSuccess","loginError","logOut","logoutRequest","logoutSuccess","logoutError","getCurrentUser","getState","persistedToken","auth","getCurrentUserRequest","get","getCurrentUserSuccess","getCurrentUserError","getIsAuthenticated","state","isAuthenticated","getUserName","user","name","createAction","fetchContactsRequest","fetchContactsSuccess","fetchContactsError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","changeFilter","UserMenu","useDispatch","useSelector","authSelectors","onLogOut","useCallback","authOperations","className","styles","user__card","src","defaultAvatar","alt","width","user__name","onClick","logout__button","Navigation","isLoggedIn","nav","to","routes","nav__link","AuthNav","auth__nav","auth__link","exact","AppBar","page__header","PrivateRoute","children","routeProps","PublicRoute","redirectTo","restricted","HomeView","lazy","RegisterView","LoginView","ContactsView","App","useEffect","fallback","path","items","createReducer","_","payload","filter","id","loading","setError","cleanError","error","combineReducers","initialState","email","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","phonebook","phonebookReducer","persistReducer","authReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4ef11b58.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"user__card\":\"UserMenu_user__card__yV5EQ\",\"user__name\":\"UserMenu_user__name__3yRIC\",\"logout__button\":\"UserMenu_logout__button__1_hxg\"};","import axios from 'axios';\nimport { authActions } from '../auth';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset() {\n        axios.defaults.headers.common.Authorization = '';\n    },\n};\n\nconst register = credentials => async dispatch => {\n    dispatch(authActions.registerRequest());\n\n    try {\n        const response = await axios.post('/users/signup', credentials);\n\n        token.set(response.data.token);\n        dispatch(authActions.registerSuccess(response.data));\n    } catch (error) {\n        dispatch(authActions.registerError(error.message));\n    }\n};\n\nconst logIn = credentials => async dispatch => {\n    dispatch(authActions.loginRequest());\n\n    try {\n        const response = await axios.post('/users/login', credentials);\n\n        token.set(response.data.token);\n        dispatch(authActions.loginSuccess(response.data));\n    } catch (error) {\n        dispatch(authActions.loginError(error.message));\n    }\n};\n\nconst logOut = () => async dispatch => {\n    dispatch(authActions.logoutRequest());\n\n    try {\n        await axios.post('/users/logout');\n\n        token.unset();\n        dispatch(authActions.logoutSuccess());\n    } catch (error) {\n        dispatch(authActions.logoutError(error.message));\n    }\n};\n\nconst getCurrentUser = () => async (dispatch, getState) => {\n    const {\n        auth: { token: persistedToken },\n    } = getState();\n\n    if (!persistedToken) {\n        return;\n    }\n\n    token.set(persistedToken);\n    dispatch(authActions.getCurrentUserRequest());\n\n    try {\n        const response = await axios.get('/users/current');\n        dispatch(authActions.getCurrentUserSuccess(response.data));\n    } catch (error) {\n        dispatch(authActions.getCurrentUserError(error.message));\n    }\n};\n\nexport default { token, register, logIn, logOut, getCurrentUser };\n","const getIsAuthenticated = state => state.auth.isAuthenticated;\n\nconst getUserName = state => state.auth.user.name;\n\nexport default { getIsAuthenticated, getUserName };\n","import { createAction } from '@reduxjs/toolkit';\n\nconst registerRequest = createAction('auth/registerRequest');\nconst registerSuccess = createAction('auth/registerSuccess');\nconst registerError = createAction('auth/registerError');\n\nconst loginRequest = createAction('auth/loginRequest');\nconst loginSuccess = createAction('auth/loginSuccess');\nconst loginError = createAction('auth/loginError');\n\nconst logoutRequest = createAction('auth/logoutRequest');\nconst logoutSuccess = createAction('auth/logoutSuccess');\nconst logoutError = createAction('auth/logoutError');\n\nconst getCurrentUserRequest = createAction('auth/getCurrentUserRequest');\nconst getCurrentUserSuccess = createAction('auth/getCurrentUserSuccess');\nconst getCurrentUserError = createAction('auth/getCurrentUserError');\n\nexport default {\n    registerRequest,\n    registerSuccess,\n    registerError,\n    loginRequest,\n    loginSuccess,\n    loginError,\n    logoutRequest,\n    logoutSuccess,\n    logoutError,\n    getCurrentUserRequest,\n    getCurrentUserSuccess,\n    getCurrentUserError,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__3KCRK\",\"nav__link\":\"Navigation_nav__link__3EoN9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth__nav\":\"AuthNav_auth__nav__wNgcv\",\"auth__link\":\"AuthNav_auth__link__2KyJ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page__header\":\"AppBar_page__header__3GqZ2\",\"header__container\":\"AppBar_header__container__2UAwU\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchContactsRequest = createAction(\n    'contacts/fetchContactsRequest',\n);\nexport const fetchContactsSuccess = createAction(\n    'contacts/fetchContactsSuccess',\n);\nexport const fetchContactsError = createAction('contacts/fetchContactsError');\n\nexport const addContactRequest = createAction('contacts/addContactRequest');\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\nexport const addContactError = createAction('contacts/addContactError');\n\nexport const deleteContactRequest = createAction(\n    'contacts/deleteContactRequest',\n);\nexport const deleteContactSuccess = createAction(\n    'contacts/deleteContactSuccess',\n);\nexport const deleteContactError = createAction('contacts/deleteContactError');\n\nexport const changeFilter = createAction('phonebook/filter');\n","export default __webpack_public_path__ + \"static/media/profile-default-image.b8edc76c.jpg\";","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { authSelectors } from '../../redux/auth';\nimport { authOperations } from '../../redux/auth';\nimport defaultAvatar from '../userMenu/profile-default-image.jpg';\nimport styles from './UserMenu.module.css';\n\nexport default function UserMenu() {\n    const dispatch = useDispatch();\n\n    const name = useSelector(authSelectors.getUserName);\n\n    const onLogOut = useCallback(() => dispatch(authOperations.logOut()), [\n        dispatch,\n    ]);\n\n    return (\n        <div className={styles.user__card}>\n            <img src={defaultAvatar} alt=\"avatar\" width=\"15\" />\n            <span className={styles.user__name}>Welcome, {name}</span>\n            <button onClick={onLogOut} className={styles.logout__button}>\n                Logout\n            </button>\n        </div>\n    );\n}\n","export default {\n    home: '/',\n    register: '/register',\n    login: '/login',\n    contacts: '/contacts',\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { authSelectors } from '../../redux/auth';\nimport routes from '../../routes';\nimport { useSelector } from 'react-redux';\nimport styles from './Navigation.module.css';\n\nexport default function Navigation() {\n    const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\n\n    return (\n        <nav className={styles.nav}>\n            <Link to={routes.home} className={styles.nav__link}>\n                Main\n            </Link>\n            {isLoggedIn && (\n                <Link to={routes.contacts} className={styles.nav__link}>\n                    Contacts\n                </Link>\n            )}\n        </nav>\n    );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport styles from './AuthNav.module.css';\n\nconst AuthNav = () => {\n    return (\n        <div className={styles.auth__nav}>\n            <NavLink className={styles.auth__link} to=\"/register\" exact>\n                Register\n            </NavLink>\n\n            <NavLink className={styles.auth__link} to=\"/login\" exact>\n                Login\n            </NavLink>\n        </div>\n    );\n};\n\nexport default AuthNav;\n","import { useSelector } from 'react-redux';\nimport { authSelectors } from '../../redux/auth';\n\nimport React from 'react';\nimport UserMenu from './UserMenu';\nimport Navigation from './Navigation';\nimport AuthNav from './AuthNav';\nimport styles from './AppBar.module.css';\n\nexport default function AppBar() {\n    const isAuthenticated = useSelector(authSelectors.getIsAuthenticated);\n    return (\n        <header className={styles.page__header}>\n            <Navigation />\n            {isAuthenticated ? <UserMenu /> : <AuthNav />}\n        </header>\n    );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { authSelectors } from '../../redux/auth';\n\n// Если маршрут приватный и пользователь залогинен - рендер компонента\n// Если нет - отправка на Логин\n\nexport default function PrivateRoute({\n    children,\n    isAuthenticated,\n    ...routeProps\n}) {\n    const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\n\n    return (\n        <Route {...routeProps}>\n            {' '}\n            {isLoggedIn ? children : <Redirect to=\"/login/>\" />}\n        </Route>\n    );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { authSelectors } from '../../redux/auth';\n\n// Если маршрут ограниченный и пользователь залогинен - отправка на /contacts\n// Если нет - рендер компонента\n\nexport default function PublicRoute({\n    children,\n    isAuthenticated,\n    redirectTo,\n    ...routeProps\n}) {\n    const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\n    return (\n        <Route {...routeProps}>\n            {isLoggedIn && routeProps.restricted ? (\n                <Redirect to={redirectTo} />\n            ) : (\n                children\n            )}\n        </Route>\n    );\n}\n","import React, { Suspense, lazy, useEffect } from 'react';\nimport { Switch } from 'react-router-dom';\n\n// Components\nimport AppBar from './component/userMenu/AppBar';\nimport routes from './routes';\nimport PrivateRoute from './component/userMenu/PrivateRoute';\nimport PublicRoute from './component/userMenu/PublicRoute';\nimport { authOperations } from './redux/auth';\nimport { useDispatch } from 'react-redux';\n\n// Lazy load\nconst HomeView = lazy(() => import('./views/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView'));\nconst ContactsView = lazy(() => import('./views/ContactsView'));\n\nexport default function App() {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(authOperations.getCurrentUser());\n    }, [dispatch]);\n\n    return (\n        <>\n            <AppBar />\n\n            <Suspense fallback={<h1>Загружаем!</h1>}>\n                <Switch>\n                    <PublicRoute exact path={routes.home}>\n                        <HomeView />\n                    </PublicRoute>\n                    <PublicRoute\n                        restricted\n                        redirectTo=\"/contacts\"\n                        path={routes.register}\n                    >\n                        <RegisterView />\n                    </PublicRoute>\n                    <PublicRoute\n                        restricted\n                        redirectTo=\"/contacts\"\n                        path={routes.login}\n                    >\n                        <LoginView />\n                    </PublicRoute>\n                    <PrivateRoute path={routes.contacts}>\n                        <ContactsView />\n                    </PrivateRoute>\n                </Switch>\n            </Suspense>\n        </>\n    );\n}\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n    fetchContactsRequest,\n    fetchContactsSuccess,\n    fetchContactsError,\n    addContactRequest,\n    addContactSuccess,\n    addContactError,\n    deleteContactRequest,\n    deleteContactSuccess,\n    deleteContactError,\n    changeFilter,\n} from './Phonebook-actions';\n\nconst items = createReducer([], {\n    [fetchContactsSuccess]: (_, { payload }) => payload,\n    [addContactSuccess]: (state, { payload }) => [...state, payload],\n    [deleteContactSuccess]: (state, { payload }) =>\n        state.filter(({ id }) => id !== payload),\n});\n\nconst filter = createReducer('', {\n    [changeFilter]: (_, { payload }) => payload,\n});\n\nconst loading = createReducer(false, {\n    [addContactRequest]: () => true,\n    [addContactSuccess]: () => false,\n    [addContactError]: () => false,\n    [deleteContactRequest]: () => true,\n    [deleteContactSuccess]: () => false,\n    [deleteContactError]: () => false,\n    [fetchContactsRequest]: () => true,\n    [fetchContactsSuccess]: () => false,\n    [fetchContactsError]: () => false,\n});\n\nconst setError = (_, { payload }) => payload;\nconst cleanError = () => null;\n\nconst error = createReducer(null, {\n    [addContactError]: setError,\n    [deleteContactError]: setError,\n    [fetchContactsError]: setError,\n    [addContactSuccess]: cleanError,\n    [deleteContactSuccess]: cleanError,\n    [fetchContactsSuccess]: cleanError,\n});\n\nexport default combineReducers({\n    items,\n    filter,\n    loading,\n    error,\n});\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { authActions } from '../auth';\n\nconst initialState = {\n    name: null,\n    email: null,\n};\n\nconst user = createReducer(initialState, {\n    [authActions.registerSuccess]: (_, { payload }) => payload.user,\n    [authActions.loginSuccess]: (_, { payload }) => payload.user,\n    [authActions.logoutSuccess]: () => initialState,\n    [authActions.getCurrentUserSuccess]: (_, { payload }) => payload,\n});\n\nconst token = createReducer(null, {\n    [authActions.registerSuccess]: (_, { payload }) => payload.token,\n    [authActions.loginSuccess]: (_, { payload }) => payload.token,\n    [authActions.logoutSuccess]: () => null,\n});\n\nconst setError = (_, { payload }) => payload;\nconst cleanError = () => null;\n\nconst error = createReducer(null, {\n    [authActions.registerError]: setError,\n    [authActions.loginError]: setError,\n    [authActions.logoutError]: setError,\n    [authActions.getCurrentUserError]: setError,\n    [authActions.registerSuccess]: cleanError,\n    [authActions.loginSuccess]: cleanError,\n    [authActions.logoutSuccess]: cleanError,\n    [authActions.getCurrentUserSuccess]: cleanError,\n});\n\nconst isAuthenticated = createReducer(false, {\n    [authActions.registerSuccess]: () => true,\n    [authActions.loginSuccess]: () => true,\n    [authActions.getCurrentUserSuccess]: () => true,\n    [authActions.registerError]: () => false,\n    [authActions.loginError]: () => false,\n    [authActions.getCurrentUserError]: () => false,\n    [authActions.logoutSuccess]: () => false,\n});\n\nexport default combineReducers({\n    user,\n    token,\n    error,\n    isAuthenticated,\n});\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport logger from 'redux-logger';\nimport storage from 'redux-persist/lib/storage';\nimport {\n    persistStore,\n    persistReducer,\n    FLUSH,\n    REHYDRATE,\n    PAUSE,\n    PERSIST,\n    PURGE,\n    REGISTER,\n} from 'redux-persist';\nimport phonebookReducer from './phonebook/Phonebook-reducer';\nimport authReducer from './auth/Auth-reducer';\n\nconst middleware = [\n    ...getDefaultMiddleware({\n        serializableCheck: {\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n        },\n    }),\n    logger,\n];\nconst authPersistConfig = {\n    key: 'auth',\n    storage,\n    whitelist: ['token'],\n};\n\nconst store = configureStore({\n    reducer: {\n        phonebook: phonebookReducer,\n        auth: persistReducer(authPersistConfig, authReducer),\n    },\n    devTools: process.env.NODE_ENV === 'development',\n    middleware,\n});\n\nconst persistor = persistStore(store);\n\nexport default { store, persistor };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store.store}>\n            <PersistGate loading={null} persistor={store.persistor}>\n                <BrowserRouter>\n                    <App />\n                </BrowserRouter>\n            </PersistGate>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}