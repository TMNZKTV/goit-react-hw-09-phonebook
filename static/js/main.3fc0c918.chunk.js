(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{10:function(t,e,r){"use strict";r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return a})),r.d(e,"h",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return b})),r.d(e,"g",(function(){return j})),r.d(e,"e",(function(){return l})),r.d(e,"d",(function(){return O}));var n=r(2),c=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),u=Object(n.b)("contacts/fetchContactsError"),s=Object(n.b)("contacts/addContactRequest"),o=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),O=Object(n.b)("phonebook/filter")},29:function(t,e,r){t.exports={user__card:"UserMenu_user__card__yV5EQ",user__name:"UserMenu_user__name__3yRIC",logout__button:"UserMenu_logout__button__1_hxg"}},30:function(t,e,r){t.exports={nav:"Navigation_nav__3KCRK",nav__link:"Navigation_nav__link__3EoN9"}},31:function(t,e,r){t.exports={auth__nav:"AuthNav_auth__nav__wNgcv",auth__link:"AuthNav_auth__link__2KyJ1"}},4:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return b})),r.d(e,"a",(function(){return l}));var n=r(16),c=r.n(n),a=r(23),u=r(18),s=r.n(u);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var o={set:function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},unset:function(){s.a.defaults.headers.common.Authorization=""}},i={token:o,register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(l.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:n=e.sent,o.set(n.data.token),r(l.registerSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(l.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(l.loginRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:n=e.sent,o.set(n.data.token),r(l.loginSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(l.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(l.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:o.unset(),e(l.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(l.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),a=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return o.set(a),e(l.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:u=t.sent,e(l.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(l.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}},b={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name}},j=r(2),l={registerRequest:Object(j.b)("auth/registerRequest"),registerSuccess:Object(j.b)("auth/registerSuccess"),registerError:Object(j.b)("auth/registerError"),loginRequest:Object(j.b)("auth/loginRequest"),loginSuccess:Object(j.b)("auth/loginSuccess"),loginError:Object(j.b)("auth/loginError"),logoutRequest:Object(j.b)("auth/logoutRequest"),logoutSuccess:Object(j.b)("auth/logoutSuccess"),logoutError:Object(j.b)("auth/logoutError"),getCurrentUserRequest:Object(j.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(j.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(j.b)("auth/getCurrentUserError")}},46:function(t,e,r){t.exports={page__header:"AppBar_page__header__3GqZ2",header__container:"AppBar_header__container__2UAwU"}},80:function(t,e,r){"use strict";r.r(e);var n=r(0),c=r.n(n),a=r(24),u=r.n(a),s=r(6),o=r(8),i=r(4),b=r.p+"static/media/profile-default-image.b8edc76c.jpg",j=r(29),l=r.n(j),O=r(1);function d(){var t=Object(o.b)(),e=Object(o.c)(i.c.getUserName),r=Object(n.useCallback)((function(){return t(i.b.logOut())}),[t]);return Object(O.jsxs)("div",{className:l.a.user__card,children:[Object(O.jsx)("img",{src:b,alt:"avatar",width:"15"}),Object(O.jsxs)("span",{className:l.a.user__name,children:["Welcome, ",e]}),Object(O.jsx)("button",{onClick:r,className:l.a.logout__button,children:"Logout"})]})}var h=r(15),f="/",g="/register",p="/login",_="/contacts",x=r(30),v=r.n(x);function m(){var t=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)("nav",{className:v.a.nav,children:[Object(O.jsx)(h.b,{to:f,className:v.a.nav__link,children:"Main"}),t&&Object(O.jsx)(h.b,{to:_,className:v.a.nav__link,children:"Contacts"})]})}var k=r(31),C=r.n(k),S=function(){return Object(O.jsxs)("div",{className:C.a.auth__nav,children:[Object(O.jsx)(h.c,{className:C.a.auth__link,to:"/register",exact:!0,children:"Register"}),Object(O.jsx)(h.c,{className:C.a.auth__link,to:"/login",exact:!0,children:"Login"})]})},E=r(46),y=r.n(E);function U(){var t=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)("header",{className:y.a.page__header,children:[Object(O.jsx)(m,{}),t?Object(O.jsx)(d,{}):Object(O.jsx)(S,{})]})}var A=r(20),R=r(28);function N(t){var e=t.children,r=(t.isAuthenticated,Object(R.a)(t,["children","isAuthenticated"])),n=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsxs)(s.b,Object(A.a)(Object(A.a)({},r),{},{children:[" ",n?e:Object(O.jsx)(s.a,{to:"/login/>"})]}))}function w(t){var e=t.children,r=(t.isAuthenticated,t.redirectTo),n=Object(R.a)(t,["children","isAuthenticated","redirectTo"]),c=Object(o.c)(i.c.getIsAuthenticated);return Object(O.jsx)(s.b,Object(A.a)(Object(A.a)({},n),{},{children:c&&n.restricted?Object(O.jsx)(s.a,{to:r}):e}))}var q=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,91))})),I=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,92))})),z=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,93))})),M=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,90))}));function T(){var t=Object(o.b)();return Object(n.useEffect)((function(){t(i.b.getCurrentUser())}),[t]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U,{}),Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c!"}),children:Object(O.jsxs)(s.d,{children:[Object(O.jsx)(w,{exact:!0,path:f,children:Object(O.jsx)(q,{})}),Object(O.jsx)(w,{restricted:!0,redirectTo:"/contacts",path:g,children:Object(O.jsx)(I,{})}),Object(O.jsx)(w,{restricted:!0,redirectTo:"/contacts",path:p,children:Object(O.jsx)(z,{})}),Object(O.jsx)(N,{path:_,children:Object(O.jsx)(M,{})})]})})]})}var B,J,K,L,F,G,Q=r(27),V=r(2),W=r(47),Z=r.n(W),D=r(48),H=r.n(D),P=r(17),X=r(3),Y=r(7),$=r(10),tt=Object(V.c)([],(B={},Object(X.a)(B,$.j,(function(t,e){return e.payload})),Object(X.a)(B,$.c,(function(t,e){var r=e.payload;return[].concat(Object(Q.a)(t),[r])})),Object(X.a)(B,$.g,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),B)),et=Object(V.c)("",Object(X.a)({},$.d,(function(t,e){return e.payload}))),rt=Object(V.c)(!1,(J={},Object(X.a)(J,$.b,(function(){return!0})),Object(X.a)(J,$.c,(function(){return!1})),Object(X.a)(J,$.a,(function(){return!1})),Object(X.a)(J,$.f,(function(){return!0})),Object(X.a)(J,$.g,(function(){return!1})),Object(X.a)(J,$.e,(function(){return!1})),Object(X.a)(J,$.i,(function(){return!0})),Object(X.a)(J,$.j,(function(){return!1})),Object(X.a)(J,$.h,(function(){return!1})),J)),nt=Object(V.c)(null,{}),ct=Object(Y.b)({items:tt,filter:et,loading:rt,error:nt}),at={name:null,email:null},ut=Object(V.c)(at,(K={},Object(X.a)(K,i.a.registerSuccess,(function(t,e){return e.payload.user})),Object(X.a)(K,i.a.loginSuccess,(function(t,e){return e.payload.user})),Object(X.a)(K,i.a.logoutSuccess,(function(){return at})),Object(X.a)(K,i.a.getCurrentUserSuccess,(function(t,e){return e.payload})),K)),st=Object(V.c)(null,(L={},Object(X.a)(L,i.a.registerSuccess,(function(t,e){return e.payload.token})),Object(X.a)(L,i.a.loginSuccess,(function(t,e){return e.payload.token})),Object(X.a)(L,i.a.logoutSuccess,(function(){return null})),L)),ot=function(t,e){return e.payload},it=Object(V.c)(null,(F={},Object(X.a)(F,i.a.registerError,ot),Object(X.a)(F,i.a.loginError,ot),Object(X.a)(F,i.a.logoutError,ot),Object(X.a)(F,i.a.getCurrentUserError,ot),F)),bt=Object(V.c)(!1,(G={},Object(X.a)(G,i.a.registerSuccess,(function(){return!0})),Object(X.a)(G,i.a.loginSuccess,(function(){return!0})),Object(X.a)(G,i.a.getCurrentUserSuccess,(function(){return!0})),Object(X.a)(G,i.a.registerError,(function(){return!1})),Object(X.a)(G,i.a.loginError,(function(){return!1})),Object(X.a)(G,i.a.getCurrentUserError,(function(){return!1})),Object(X.a)(G,i.a.logoutSuccess,(function(){return!1})),G)),jt=Object(Y.b)({user:ut,token:st,error:it,isAuthenticated:bt}),lt=[].concat(Object(Q.a)(Object(V.d)({serializableCheck:{ignoredActions:[P.a,P.f,P.b,P.c,P.d,P.e]}})),[Z.a]),Ot={key:"auth",storage:H.a,whitelist:["token"]},dt=Object(V.a)({reducer:{phonebook:ct,auth:Object(P.g)(Ot,jt)},devTools:!1,middleware:lt}),ht={store:dt,persistor:Object(P.h)(dt)},ft=r(49);u.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(o.a,{store:ht.store,children:Object(O.jsx)(ft.a,{loading:null,persistor:ht.persistor,children:Object(O.jsx)(h.a,{children:Object(O.jsx)(T,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.3fc0c918.chunk.js.map